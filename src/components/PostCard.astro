---
import Badges from './Badges.astro';

interface Props {
  href: string;
  title: string;
  description: string;
  date: Date;
  lang: 'fr' | 'en';
  readingTimeMinutes?: number;
  aiAssisted?: boolean;
}

const { href, title, description, date, lang, readingTimeMinutes, aiAssisted = false } = Astro.props;

const formattedDate = new Intl.DateTimeFormat(lang === 'fr' ? 'fr-FR' : 'en-US', {
  year: 'numeric',
  month: 'short',
  day: 'numeric',
}).format(date);
---

<a class="card post-card" href={href}>
  <div class="card-meta">
    <div class="card-badges">
      <span class="badge">{lang.toUpperCase()}</span>
      <Badges aiAssisted={aiAssisted} />
    </div>
    <div class="card-meta-right">
      <time datetime={date.toISOString()}>{formattedDate}</time>
      {readingTimeMinutes && <span>{`â€¢ ${readingTimeMinutes} min`}</span>}
    </div>
  </div>
  <h3>{title}</h3>
  <p>{description}</p>
</a>
